function getData(){sendAjax(function(e){var t=JSON.parse(e);$("#loading").hide(),0==t.success&&alert(t.error);var n=t.history,r=t.ppos,o=t.canPlay,i=t.p1Name,a=t.p2Name;o?($("#moves").show(),1==r?(document.getElementById("result").innerHTML=didWin([n.charAt(n.length-2),n.charAt(n.length-1)]).toUpperCase(),document.getElementById("yourName").innerHTML=i,document.getElementById("theirName").innerHTML=a):(document.getElementById("result").innerHTML=didWin([n.charAt(n.length-1),n.charAt(n.length-2)]).toUpperCase(),document.getElementById("yourName").innerHTML=a,document.getElementById("theirName").innerHTML=i)):($("#moves").hide(),document.getElementById("result").innerHTML="PENDING"),1==r?(document.getElementById("yourName").innerHTML=i,document.getElementById("theirName").innerHTML=a):(document.getElementById("yourName").innerHTML=a,document.getElementById("theirName").innerHTML=i),document.getElementById("table").innerHTML="<tr><td>Your Move</td><td>Result</td><td>Their Move</td></tr>";for(var d=0;d<n.length-1;d+=2){var m,u;1==r?(m=n[d],u=n[d+1]):(m=n[d+1],u=n[d]);var c=document.getElementById("table"),l=c.insertRow(1),s=l.insertCell(0),g=l.insertCell(1),h=l.insertCell(2);s.innerHTML=moveToName(m),g.innerHTML=didWin([m,u]),h.innerHTML=moveToName(u)}})}function sendAjax(e){$.ajax({url:"gameData.php",type:"POST",data:{id:id,userid:p_id},beforeSend:function(){$("#loading").show()},success:function(t){e(t)},error:function(){$("#loading").hide(),alert("Request Failed")},timeout:5e3})}function moveToName(e){return"r"==e?"Rock":"p"==e?"Paper":"Scissors"}function play(e){$.ajax({url:"makeMove.php",type:"POST",data:{id:id,userid:p_id,move:e},success:function(e){getData()}})}function didWin(e){for(var t=0;2>t;t++)switch(e[t]){case"r":e[t]=0;break;case"p":e[t]=1;break;case"s":e[t]=2}return e[0]===e[1]?"tie":e[0]+1===e[1]||2==e[0]&&0==e[1]?"lost":"won"}function goHome(){window.location="index.html"}$(document).ready(function(){getData()});