<!DOCTYPE HTML>

<html>
<head>
<script src="js/jquery-1.12.0.js"></script>
</head>
</body>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<div class="container">
		<h1> Create game </h1>
		
		<p>Your Name: <input id = "name" type="text" name="name" value = ""/></p>
		<input type="submit" name="submit" value = "Create Game" onclick="createGame()"/>
		
		<h1 id="game_code">Game Code: </h1>
		<p>Personal Link: <a href="" id="p_link"></a><p>
		<p>Join Link: <a href="" id="j_link"></a><p>
		<p id="message"><p>
	</div>
</meta>
	
<script>
	function createGame(){
		sendAjax(function(output){
			var results = JSON.parse(output);
			
			var game_code = results["game_id"];
			var personal_link = results["p_link"];
			var join_link = results["j_link"];
			
			if(!game_code || !personal_link || !join_link){
				$('#message').text("Error: "+output);
			}else{
				$('#message').text("");
				$("#p_link").prop("href", personal_link);
				$("#j_link").prop("href", join_link);
			
				$('#game_code').text("Game Code: ".concat(game_code));
				$('#p_link').text(personal_link);
				$('#j_link').text(join_link);
			}
		});
	}
		
	function sendAjax(handleData) {
		$.ajax({
			url:"createGame.php",
			type:'POST',
			data:
			{
				name:document.getElementById("name").value,
			},
			success:function(data) {
				handleData(data); 
			}
		});
	}
</script>

</body>
</html>